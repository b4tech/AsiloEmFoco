CREATE DATABASE AsiloEmFoco;

CREATE TABLE IF NOT EXISTS `contato` (
    `idContato` int(9) AUTO_INCREMENT NOT NULL,
    `tipo` varchar(15) NOT NULL,
    `telefone` varchar(11) NOT NULL,
    PRIMARY KEY (`idContato`)
);

CREATE TABLE IF NOT EXISTS `estado`(
    `idEstado` INT (9) AUTO_INCREMENT NOT NULL,
    `sigla` VARCHAR (2) NOT NULL,
    `nome` VARCHAR (18) NOT NULL,
    PRIMARY KEY (`idEstado`) 
);

CREATE TABLE IF NOT EXISTS `endereco`(
    `idEndereco` INT (9) AUTO_INCREMENT NOT NULL,
    `cidade` VARCHAR (28) NOT NULL,
    `logradouro` VARCHAR (50) NOT NULL,
    `numero` INT (5) NOT NULL,
    `cep` VARCHAR (9) NOT NULL,
    `bairro` VARCHAR (50) NOT NULL,
    `complemento` VARCHAR (50),
    `estadoId` INT (8) NOT NULL,
    PRIMARY KEY (`idEndereco`)
);

CREATE TABLE IF NOT EXISTS `idoso` (
    `idIdoso` int(9) AUTO_INCREMENT,  
    `dataNasc` DATE,  
    `cpf` varchar(11),  
    `nome` varchar(45),  
    `responsavelId` int (8),
    PRIMARY KEY (`idIdoso`)
);

CREATE TABLE IF NOT EXISTS `asilo` (
    `idAsilo` int(9) AUTO_INCREMENT NOT NULL,
    `razaoSocial` varchar(50) NOT NULL,
    `contatoId` int(9) NOT NULL,
    `cnpj`varchar(14) NOT NULL,
    `enderecoId` int(8)  NOT NULL,
    `loginId` int(8)  NOT NULL,
    `email` varchar(50) NOT NULL,
    PRIMARY KEY (`idAsilo`)
);

CREATE TABLE IF NOT EXISTS `responsavel`(
    `idResponsavel` INT (9) AUTO_INCREMENT NOT NULL,
    `nome` VARCHAR (45) NOT NULL,
    `cpf` VARCHAR (11) NOT NULL,
    `email` VARCHAR (45) NOT NULL,
    `dataNasc` DATE NOT NULL,
    `contatoId` INT (8) NOT NULL,
    `enderecoId` INT (8) NOT NULL,
    `asiloId` INT (8),
    `loginId` int(8)  NOT NULL,
    PRIMARY KEY (`idResponsavel`)
);

CREATE TABLE IF NOT EXISTS `funcionario` (
    `idFuncionario` int(9) AUTO_INCREMENT NOT NULL,
    `nome` varchar(45) NOT NULL,
    `cpf` varchar(11) NOT NULL,
    `email` varchar(45) NOT NULL,
    `dataNasc` DATE NOT NULL,
    `contatoId` int(8)  NOT NULL,
    `asiloId` int(8)  NOT NULL,
    `enderecoId` int(8)  NOT NULL,
    `formacaoId` int(8)  NOT NULL,
    `loginId` int(8)  NOT NULL,
    PRIMARY KEY (`idFuncionario`)
);

CREATE TABLE IF NOT EXISTS `formacaoFuncionario` (
    `idFormacaoFuncionario` int(9) AUTO_INCREMENT NOT NULL,
    `tipoFormacao` int(1) NOT NULL,
    `coren` varchar(13) NOT NULL,
    PRIMARY KEY (`idFormacaoFuncionario`)
);

CREATE TABLE IF NOT EXISTS `prontuario` (
    `idProntuario` int(9) AUTO_INCREMENT NOT NULL,
    `descricao` varchar(150) NOT NULL,
    `data` date NOT NULL,
    `hora` time NOT NULL,
    `idosoId` int(8)  NOT NULL,
    PRIMARY KEY (`idProntuario`)
); 

CREATE TABLE IF NOT EXISTS `avaliacao` (
    `idAvaliacao` int(9) AUTO_INCREMENT NOT NULL,
    `comentario` varchar(200),
    `nota` int(1) NOT NULL,
    `asiloId` int(8)  NOT NULL,
    PRIMARY KEY (`idAvaliacao`)
);

CREATE TABLE IF NOT EXISTS `login` (
    `idLogin` int(9) AUTO_INCREMENT NOT NULL,
    `username` varchar(20) NOT NULL,
    `password` varchar(30) NOT NULL,
    `confirmPassword` varchar(30) NOT NULL,
    `perfil` int(1) NOT NULL,
    PRIMARY KEY (`idLogin`)
);

ALTER TABLE asilo
ADD FOREIGN KEY (`contatoId`) REFERENCES contato(idContato) ON DELETE CASCADE,
ADD FOREIGN KEY (`enderecoId`) REFERENCES endereco(idEndereco) ON DELETE CASCADE,
ADD FOREIGN KEY (`loginId`) REFERENCES login(idLogin) ON DELETE CASCADE;

ALTER TABLE avaliacao
ADD FOREIGN KEY (`asiloId`) REFERENCES asilo(idAsilo) ON DELETE CASCADE;

ALTER TABLE endereco
ADD FOREIGN KEY (`estadoId`) REFERENCES estado(idEstado) ON DELETE CASCADE;

ALTER TABLE funcionario
ADD FOREIGN KEY (`asiloId`) REFERENCES asilo(idAsilo) ON DELETE CASCADE,
ADD FOREIGN KEY (`contatoId`) REFERENCES contato(idContato) ON DELETE CASCADE,
ADD FOREIGN KEY (`enderecoId`) REFERENCES endereco(idEndereco) ON DELETE CASCADE,
ADD FOREIGN KEY (`formacaoId`) REFERENCES formacaoFuncionario(idFormacaoFuncionario) ON DELETE CASCADE,
ADD FOREIGN KEY (`loginId`) REFERENCES login(idLogin) ON DELETE CASCADE;

ALTER TABLE idoso
ADD FOREIGN KEY (`responsavelId`) REFERENCES responsavel(idResponsavel) ON DELETE CASCADE;

ALTER TABLE prontuario
ADD FOREIGN KEY (`idosoId`) REFERENCES idoso(idIdoso) ON DELETE CASCADE;

ALTER TABLE responsavel
ADD FOREIGN KEY (`contatoId`) REFERENCES contato(idContato) ON DELETE CASCADE,
ADD FOREIGN KEY (`enderecoId`) REFERENCES endereco(idEndereco) ON DELETE CASCADE,
ADD FOREIGN KEY (`asiloId`) REFERENCES asilo(idAsilo) ON DELETE CASCADE,
ADD FOREIGN KEY (`loginId`) REFERENCES login(idLogin) ON DELETE CASCADE;

insert into `estado` (`sigla`, `nome`) values ('AC', 'Acre');
insert into `estado` (`sigla`, `nome`) values ('AL', 'Alagoas');
insert into `estado` (`sigla`, `nome`) values ('AP', 'Amapá');
insert into `estado` (`sigla`, `nome`) values ('AM', 'Amazonas');
insert into `estado` (`sigla`, `nome`) values ('BA', 'Bahia');
insert into `estado` (`sigla`, `nome`) values ('CE', 'Ceará');
insert into `estado` (`sigla`, `nome`) values ('DF', 'Distrito Federal');
insert into `estado` (`sigla`, `nome`) values ('ES', 'Espírito Santo');
insert into `estado` (`sigla`, `nome`) values ('GO', 'Goiás');
insert into `estado` (`sigla`, `nome`) values ('MA', 'Maranhão');
insert into `estado` (`sigla`, `nome`) values ('MT', 'Mato Grosso');
insert into `estado` (`sigla`, `nome`) values ('MS', 'Mato Grosso do Sul');
insert into `estado` (`sigla`, `nome`) values ('MG', 'Minas Gerais');
insert into `estado` (`sigla`, `nome`) values ('PA', 'Pará');
insert into `estado` (`sigla`, `nome`) values ('PB', 'Paraína');
insert into `estado` (`sigla`, `nome`) values ('PR', 'Paraná');
insert into `estado` (`sigla`, `nome`) values ('PE', 'Pernambuco');
insert into `estado` (`sigla`, `nome`) values ('PI', 'Piauí');
insert into `estado` (`sigla`, `nome`) values ('RJ', 'Rio de Janeiro');
insert into `estado` (`sigla`, `nome`) values ('RN', 'Rio Grande do Norte');
insert into `estado` (`sigla`, `nome`) values ('RS', 'Rio Grande do Sul');
insert into `estado` (`sigla`, `nome`) values ('RO', 'Rondônia');
insert into `estado` (`sigla`, `nome`) values ('RR', 'Roraima');
insert into `estado` (`sigla`, `nome`) values ('SC', 'Santa Catarina');
insert into `estado` (`sigla`, `nome`) values ('SP', 'São Paulo');
insert into `estado` (`sigla`, `nome`) values ('SE', 'Sergipe');
insert into `estado` (`sigla`, `nome`) values ('TO', 'Tocatins');

insert into `login` (`username`, `password`, `confirmPassword`, `perfil`) values ('adm', 'adm', 'adm', 0);